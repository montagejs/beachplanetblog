var Montage=require("montage").Montage,Component3D=require("runtime/component-3d").Component3D,Transform=require("runtime/transform").Transform,BasicAnimation=require("runtime/animation").BasicAnimation;require("runtime/dependencies/gl-matrix"),exports.Node=Component3D.specialize({constructor:{value:function(){this.super(),this._hidden=!1,this._visibility="visible",this._offsetTransform=Object.create(Transform).init(),this.addOwnPropertyChangeListener("hidden",this),this.addOwnPropertyChangeListener("visibility",this),this.addOwnPropertyChangeListener("offsetTransform",this),this.addOwnPropertyChangeListener("originVector",this),this.addOwnPropertyChangeListener("glTFElement",this),this.addOwnPropertyChangeListener("transformOrigin",this),this.addOwnPropertyChangeListener("transformZOrigin",this),this.addOwnPropertyChangeListener("cursor",this)}},animationDidStart:{value:function(){}},animationDidStop:{value:function(){}},animationDidUpdate:{value:function(){}},handleGlTFElementChange:{value:function(){this.handleHiddenChange(),this.handleVisibilityChange(),this.handleOffsetTransformChange(),this.handleOriginVectorChange(),this.handleTransformOriginChange(),this.handleTransformZOriginChange(),this._applyCSSPropertyWithValueForState(this.__STYLE_DEFAULT__,"offsetTransform",this._offsetTransform)}},handleHiddenChange:{value:function(){null!=this.glTFElement&&(this.glTFElement.hidden=this._hidden,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},handleVisibilityChange:{value:function(){null!=this.glTFElement&&(this.glTFElement.hidden=this.visibility?"hidden"===this.visibility:!1,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},offsetTransform_animationSetter:{set:function(e){this._offsetTransform=e,this.handleOffsetTransformChange()}},handleCursorChange:{value:function(){this.scene.dispatchEventNamed("cursorUpdate",!0,!1,this.cursor)}},handleTransformOriginChange:{value:function(){var e=this.transformOrigin;null==e&&(e=this.initialValueForStyleableProperty("transformOrigin")),this.originVector=vec3.createFrom(e[0],e[1],this.transformZOrigin)}},handleTransformZOriginChange:{value:function(){var e=this.transformOrigin;null==e&&(e=this.initialValueForStyleableProperty("transformOrigin")),this.originVector=vec3.createFrom(e[0],e[1],this.transformZOrigin)}},handleOffsetTransformChange:{value:function(){null!=this.glTFElement&&(this.glTFElement._offsetTransform=this._offsetTransform,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},handleOriginVectorChange:{value:function(){null!=this.glTFElement&&(this.glTFElement._originVector=this._originVector,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},_hidden:{value:!1,writable:!0},hidden:{set:function(e){this._hidden!=e&&(this._hidden=e)},get:function(){return this._hidden}},_visibility:{value:!1,writable:!0},visibility:{set:function(e){this._visibility=e},get:function(){return this._visibility}},_transform:{value:null,writable:!0},transform:{set:function(e){this._transform=e},get:function(){return this._transform}},_offsetTransform:{value:null,writable:!0},offsetTransform:{set:function(e){if(this.glTFElement){var t=this.scene.glTFElement.animationManager;if(t.removeAnimationWithTargetAndPath(this,"offsetTransform_animationSetter"),this._style&&this._style.transitions){var n=this._style.transitions.offsetTransform;if(null!=n&&n.duration>0){this._offsetTransform.matrix=this._offsetTransform.matrix,fromTr=this._offsetTransform,toTr=e;var i=Object.create(BasicAnimation).init();return i.path="offsetTransform_animationSetter",i.target=this,i.delegate=this,i.from=fromTr,i.to=toTr,i.duration=1e3*n.duration,t.playAnimation(i),i.animationWasAddedToTarget(),t.evaluateAtTime(Date.now()),void 0}}}this._offsetTransform=e},get:function(){return this._offsetTransform}},_originVector:{value:null,writable:!0},originVector:{set:function(e){this._originVector=e},get:function(){return this._originVector}},_transformOrigin:{value:null,writable:!0},transformOrigin:{set:function(e){this._transformOrigin=e},get:function(){return this._transformOrigin}},_transformZOrigin:{value:50,writable:!0},transformZOrigin:{set:function(e){this._transformZOrigin=e},get:function(){return this._transformZOrigin}},_observers:{value:null,writable:!0},addObserver:{value:function(e){null==this._observers&&(this._observers=[]),-1===this._observers.indexOf(e)?this._observers.push(e):console.log("WARNING attempt to add 2 times the same observer in glTFNode")}},removeObserver:{value:function(e){if(this._observers){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}}},_stylableProperties:{value:["visibility","offsetTransform","transformOrigin","transformZOrigin","cursor"]},styleableProperties:{get:function(){return this._stylableProperties}},initialValueForStyleableProperty:{value:function(e){return"visibility"===e?"visible":"offsetTransform"===e?Object.create(Transform).init():"originVector"===e?vec3.createFrom(50,50,50):"offsetMatrix"===e?mat4.identity():"transformOrigin"===e?vec2.createFrom(50,50):"transformZOrigin"===e?50:"cursor"===e?"auto":void 0}}});