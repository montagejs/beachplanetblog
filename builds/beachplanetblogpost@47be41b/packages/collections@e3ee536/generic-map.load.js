montageDefine("e3ee536","generic-map",{dependencies:["./shim-object","./listen/map-changes","./listen/property-changes"],factory:function(e,t,i){"use strict";function n(){throw Error("Can't construct. GenericMap is a mixin.")}function s(e,t){this.key=e,this.value=t}var a=e("./shim-object"),o=e("./listen/map-changes"),r=e("./listen/property-changes");i.exports=n,a.addEach(n.prototype,o.prototype),a.addEach(n.prototype,r.prototype),n.prototype.isMap=!0,n.prototype.addEach=function(e){if(e&&a(e)===e)if("function"==typeof e.forEach)e.isMap===!0?e.forEach(function(e,t){this.set(t,e)},this):e.forEach(function(e){this.set(e[0],e[1])},this);else if("number"==typeof e.length)for(var t=0;e.length>t;t++)this.add(e[t],t);else a.keys(e).forEach(function(t){this.set(t,e[t])},this);else if(e&&"number"==typeof e.length)for(var t=0;e.length>t;t++)this.add(e[t],t);return this},n.prototype.get=function(e,t){var i=this.store.get(new this.Item(e));return i?i.value:arguments.length>1?t:this.getDefault(e)},n.prototype.set=function(e,t){var i=new this.Item(e,t),n=this.store.get(i),s=!1;return n?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,n.value),n.value=t,this.dispatchesMapChanges&&this.dispatchMapChange(e,t)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,void 0),this.store.add(i)&&(this.length++,s=!0),this.dispatchesMapChanges&&this.dispatchMapChange(e,t)),s},n.prototype.add=function(e,t){return this.set(t,e)},n.prototype.has=function(e){return this.store.has(new this.Item(e))},n.prototype["delete"]=function(e){var t=new this.Item(e);if(this.store.has(t)){var i=this.store.get(t).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(e,i),this.store["delete"](t),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(e,void 0),!0}return!1},n.prototype.clear=function(){var e;this.dispatchesMapChanges&&(this.forEach(function(e,t){this.dispatchBeforeMapChange(t,e)},this),e=this.keys()),this.store.clear(),this.length=0,this.dispatchesMapChanges&&e.forEach(function(e){this.dispatchMapChange(e)},this)},n.prototype.reduce=function(e,t,i){return this.store.reduce(function(t,n){return e.call(i,t,n.value,n.key,this)},t,this)},n.prototype.reduceRight=function(e,t,i){return this.store.reduceRight(function(t,n){return e.call(i,t,n.value,n.key,this)},t,this)},n.prototype.keys=function(){return this.map(function(e,t){return t})},n.prototype.values=function(){return this.map(Function.identity)},n.prototype.entries=function(){return this.map(function(e,t){return[t,e]})},n.prototype.items=function(){return this.entries()},n.prototype.equals=function(e,t){if(t=t||a.equals,this===e)return!0;if(e&&"function"==typeof e.every)return e.length===this.length&&e.every(function(e,i){return t(this.get(i),e)},this);var i=a.keys(e);return i.length===this.length&&a.keys(e).every(function(i){return t(this.get(i),e[i])},this)},n.prototype.toJSON=function(){return this.entries()},n.prototype.Item=s,s.prototype.equals=function(e){return a.equals(this.key,e.key)&&a.equals(this.value,e.value)},s.prototype.compare=function(e){return a.compare(this.key,e.key)}}});