montageDefine("e3ee536","fast-set",{dependencies:["./shim","./dict","./list","./generic-collection","./generic-set","./tree-log","./listen/property-changes","fast-set"],factory:function(e,t,i){"use strict";function n(e,t,i,s){if(!(this instanceof n))return new n(e,t,i,s);t=t||Object.equals,i=i||Object.hash,s=s||Function.noop,this.contentEquals=t,this.contentHash=i,this.getDefault=s;var a=this;this.buckets=new this.Buckets(null,function(){return new a.Bucket}),this.length=0,this.addEach(e)}e("./shim");var s=e("./dict"),a=e("./list"),o=e("./generic-collection"),r=e("./generic-set"),l=e("./tree-log"),u=e("./listen/property-changes");Object.prototype.hasOwnProperty,i.exports=n,n.FastSet=n,Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,u.prototype),n.prototype.Buckets=s,n.prototype.Bucket=a,n.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentHash,this.getDefault)},n.prototype.has=function(e){var t=this.contentHash(e);return this.buckets.get(t).has(e)},n.prototype.get=function(e,t){if(t)throw Error("FastSet#get does not support second argument: equals");var i=this.contentHash(e),n=this.buckets;return n.has(i)?n.get(i).get(e):this.getDefault(e)},n.prototype["delete"]=function(e,t){if(t)throw Error("FastSet#delete does not support second argument: equals");var i=this.contentHash(e),n=this.buckets;if(n.has(i)){var s=n.get(i);if(s["delete"](e))return this.length--,0===s.length&&n["delete"](i),!0}return!1},n.prototype.clear=function(){this.buckets.clear(),this.length=0},n.prototype.add=function(e){var t=this.contentHash(e),i=this.buckets;return i.has(t)||i.set(t,new this.Bucket(null,this.contentEquals)),i.get(t).has(e)?!1:(i.get(t).add(e),this.length++,!0)},n.prototype.reduce=function(e,t){var i=arguments[2],n=this.buckets,s=0;return n.reduce(function(t,n){return n.reduce(function(t,n){return e.call(i,t,n,s++,this)},t,this)},t,this)},n.prototype.one=function(){return this.length>0?this.buckets.one().one():void 0},n.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},n.prototype.log=function(e,t,i,n){e=e||l.unicodeSharp,t=t||this.logNode,i||(i=console.log,n=console),i=i.bind(n);var s=this.buckets,a=s.keys();a.forEach(function(o,r){var l,u;r===a.length-1?(l=e.fromAbove,u=" "):0===r?(l=e.branchDown,u=e.strafe):(l=e.fromBoth,u=e.strafe);var h=s.get(o);i.call(n,l+e.through+e.branchDown+" "+o),h.forEach(function(s,a){var o,r;a===h.head.prev?(o=e.fromAbove,r=" "):(o=e.fromBoth,r=e.strafe);var l;t(a,function(t){l?i.call(n,u+" "+r+"  "+t):(i.call(n,u+" "+o+e.through+e.through+t),l=!0)},function(t){i.call(n,u+" "+e.strafe+"  "+t)})})})},n.prototype.logNode=function(e,t){var i=e.value;Object(i)===i?JSON.stringify(i,null,4).split("\n").forEach(function(e){t(" "+e)}):t(" "+i)}}});