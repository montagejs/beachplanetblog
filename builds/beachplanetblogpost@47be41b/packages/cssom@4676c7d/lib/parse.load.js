montageDefine("4676c7d","lib/parse",{dependencies:["./CSSStyleSheet","./CSSStyleRule","./CSSImportRule","./CSSMediaRule","./CSSFontFaceRule","./CSSStyleDeclaration","./CSSKeyframeRule","./CSSKeyframesRule","./CSSValueExpression","./CSSDocumentRule"],factory:function(e,t){var n={};n.parse=function(e){for(var t,i,r,a,s,o,l,c,u,h,d=0,p="before-selector",m="",f={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0,"documentRule-begin":!0},g=new n.CSSStyleSheet,v=g,_="",y=/@(-(?:\w+-)+)?keyframes/g,b=function(t){var n=e.substring(0,d).split("\n"),i=n.length,r=n.pop().length+1,a=Error(t+" (line "+i+", char "+r+")");throw a.line=i,a.char=r,a.styleSheet=g,a};h=e.charAt(d);d++)switch(h){case" ":case"	":case"\r":case"\n":case"\f":f[p]&&(m+=h);break;case'"':t=d+1;do t=e.indexOf('"',t)+1,t||b('Unmatched "');while("\\"===e[t-2]);switch(m+=e.slice(d,t),d=t-1,p){case"before-value":p="value";break;case"importRule-begin":p="importRule"}break;case"'":t=d+1;do t=e.indexOf("'",t)+1,t||b("Unmatched '");while("\\"===e[t-2]);switch(m+=e.slice(d,t),d=t-1,p){case"before-value":p="value";break;case"importRule-begin":p="importRule"}break;case"/":"*"===e.charAt(d+1)?(d+=2,t=e.indexOf("*/",d),-1===t?b("Missing */"):d=t+1):m+=h,"importRule-begin"===p&&(m+=" ",p="importRule");break;case"@":if(e.indexOf("@-moz-document",d)===d){p="documentRule-begin",u=new n.CSSDocumentRule,u.__starts=d,d+="-moz-document".length,m="";break}if(e.indexOf("@media",d)===d){p="atBlock",s=new n.CSSMediaRule,s.__starts=d,d+="media".length,m="";break}if(e.indexOf("@import",d)===d){p="importRule-begin",d+="import".length,m+="@import";break}if(e.indexOf("@font-face",d)===d){p="fontFaceRule-begin",d+="font-face".length,l=new n.CSSFontFaceRule,l.__starts=d,m="";break}y.lastIndex=d;var C=y.exec(e);if(C&&C.index===d){p="keyframesRule-begin",c=new n.CSSKeyframesRule,c.__starts=d,c._vendorPrefix=C[1],d+=C[0].length-1,m="";break}"selector"==p&&(p="atRule"),m+=h;break;case"{":"selector"===p||"atRule"===p?(a.selectorText=m.trim(),a.style.__starts=d,m="",p="before-name"):"atBlock"===p?(s.media.mediaText=m.trim(),v=i=s,s.parentStyleSheet=g,m="",p="before-selector"):"fontFaceRule-begin"===p?(i&&(l.parentRule=i),l.parentStyleSheet=g,a=l,m="",p="before-name"):"keyframesRule-begin"===p?(c.name=m.trim(),i&&(c.parentRule=i),c.parentStyleSheet=g,v=i=c,m="",p="keyframeRule-begin"):"keyframeRule-begin"===p?(a=new n.CSSKeyframeRule,a.keyText=m.trim(),a.__starts=d,m="",p="before-name"):"documentRule-begin"===p&&(u.matcher.matcherText=m.trim(),i&&(u.parentRule=i),v=i=u,u.parentStyleSheet=g,m="",p="before-selector");break;case":":"name"===p?(r=m.trim(),m="",p="before-value"):m+=h;break;case"(":if("value"===p)if("expression"==m.trim()){var w=new n.CSSValueExpression(e,d).parse();w.error?b(w.error):(m+=w.expression,d=w.idx)}else t=e.indexOf(")",d+1),-1===t&&b('Unmatched "("'),m+=e.slice(d,t+1),d=t;else m+=h;break;case"!":"value"===p&&e.indexOf("!important",d)===d?(_="important",d+="important".length):m+=h;break;case";":switch(p){case"value":a.style.setProperty(r,m.trim(),_),_="",m="",p="before-name";break;case"atRule":m="",p="before-selector";break;case"importRule":o=new n.CSSImportRule,o.parentStyleSheet=o.styleSheet.parentStyleSheet=g,o.cssText=m+h,g.cssRules.push(o),m="",p="before-selector";break;default:m+=h}break;case"}":switch(p){case"value":a.style.setProperty(r,m.trim(),_),_="";case"before-name":case"name":a.__ends=d+1,i&&(a.parentRule=i),a.parentStyleSheet=g,v.cssRules.push(a),m="",p=v.constructor===n.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":i||b("Unexpected }"),v.__ends=d+1,g.cssRules.push(v),v=g,i=null,m="",p="before-selector"}break;default:switch(p){case"before-selector":p="selector",a=new n.CSSStyleRule,a.__starts=d;break;case"before-name":p="name";break;case"before-value":p="value";break;case"importRule-begin":p="importRule"}m+=h}return g},t.parse=n.parse,n.CSSStyleSheet=e("./CSSStyleSheet").CSSStyleSheet,n.CSSStyleRule=e("./CSSStyleRule").CSSStyleRule,n.CSSImportRule=e("./CSSImportRule").CSSImportRule,n.CSSMediaRule=e("./CSSMediaRule").CSSMediaRule,n.CSSFontFaceRule=e("./CSSFontFaceRule").CSSFontFaceRule,n.CSSStyleDeclaration=e("./CSSStyleDeclaration").CSSStyleDeclaration,n.CSSKeyframeRule=e("./CSSKeyframeRule").CSSKeyframeRule,n.CSSKeyframesRule=e("./CSSKeyframesRule").CSSKeyframesRule,n.CSSValueExpression=e("./CSSValueExpression").CSSValueExpression,n.CSSDocumentRule=e("./CSSDocumentRule").CSSDocumentRule}});